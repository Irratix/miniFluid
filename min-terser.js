for(C of(a=[],X=c.getContext`2d`,y=x=0,O.value))C<" "?(y++,x=-1):C<"!"||a.push({x:x,y:y,w:"#"==C,a:0,b:0}),x++;$=Math.hypot,setInterval(()=>{for(p of a)for(q of(p.D=p.w&&9,a))g=$(p.x-q.x,p.y-q.y)/2,p.D+=g<1&&--g*g;for(p of a)for(q of(p.d=1,p.c=0,a))g=$(e=p.x-q.x,f=p.y-q.y)/2,g<1&&(p.d+=(f*(3-p.D-q.D)*3+4*p.b-4*q.b)*--g/p.D,p.c+=(e*(3-p.D-q.D)*3+4*p.a-4*q.a)*g/p.D);for(p of(c.width^=0,X.fillStyle="#0005",a))x=p.x,y=p.y,X.fillRect(3*x,5*y,9,8),p.w||(p.y+=p.b+=p.d/25,p.x+=p.a+=p.c/15)},16)
